

# @author Pietrko <p.l.stepnicki@gmail.com>
# @description Mutation events

# @version 0.1.0
# @modified on 0.1.2

# @compatibility 2.1.6
# @wip

# Ways to get mutated (all mentioned in book)
# Handled in this event

# 1.Bad location
# 2.Relics of chaos (books etc)

# Handled by other evnet chains
# 3.Using magic [magicengine]

# 4.From birth [on_action_event]
# 5.Nurgle's rot [health_events]

# 6.Possession [possession_engine]
# Mutation counter: counts mutations

# 5 for minor, 10 for major, 20 for massive
# mutatitions add up more than 20 mutation counter increase the chance of becoming Chaos Spawn
namespace = mutation

# Umbrella event for getting random mutation
character_event = {
	id = mutation.1
	hide_window = yes

	# things which exclude mutation
	trigger = {
		nor = {
			has_game_rule = {
				name = warhammer_mutations
				value = off
			}
			location = {
				region = world_ulthuan
			}
			trait = everqueen
			trait = avatar_kurnous
			trait = avatar_isha
			trait = fay_enchantress
			trait = creature_forestspirit
			trait = creature_treekin
			trait = creature_nehekharan
			trait = khorne_demon
			trait = nurgle_demon
			trait = slaanesh_demon
			trait = tzeentch_demon
			trait = hashut_kdaai
			trait = creature_slann
			trait = vampire_lahmian_visible
			trait = vampire_carstein_visible
			trait = vampire_blood_visible
			trait = vampire_strigoi_visible
			trait = vampire_necrarch_visible
			trait = vampire_jade_visible
			trait = vampire_mahtmasi_visible
			trait = vampire_lahmian_hidden
			trait = vampire_carstein_hidden
			trait = vampire_blood_hidden
			trait = vampire_strigoi_hidden
			trait = vampire_necrarch_hidden
			trait = vampire_jade_hidden
			trait = vampire_mahtmasi_hidden
		}
		# you can only get a mutation if there's a specific source causing it.
		OR = {
 			NOT = {
				age = 5
			}
 			trait = creature_beastman
			location = {
				empire = {
					title = e_chaos_wastes
				}
			}
			location = {
				has_province_modifier = warpdust_traces
			}
			location = {
				has_province_modifier = beastman_herdstone
			}
			liege = {
				any_courtier = {
					OR = {
						trait = slaanesh_demon
						trait = tzeentch_demon
						trait = nurgle_demon
						trait = khorne_demon
					}
				}
			}
			and = {
				NOT = {
					trait = creature_skink
				}
				OR = {
					wh_has_any_magic_potential_trigger = yes
					wh_is_mage_trigger = yes
				}
			}
		}
	}

	mean_time_to_happen = {
		years = 300
		# Cosmic modifers not geography or trait dependent
		# Morrslieb presence
		modifier = {
			factor = 0.75
			has_global_flag = morrslieb_full
		}
		# Chaos counter modifier
		modifier = {
			factor = 0.9
			has_global_flag = doom_low
		}
		modifier = {
			factor = 0.6
			has_global_flag = doom_medium
		}
		modifier = {
			factor = 0.5
			has_global_flag = doom_high
		}
		modifier = {
			factor = 0.4
			has_global_flag = doom_very_high
		}
		modifier = {
			factor = 0.3
			has_global_flag = doom
		}
		# Trait dependent modifiers
		modifier = {
			factor = 10
			trait = creature_dwarf
		}
		modifier = {
			factor = 10
			OR = {
				trait = creature_orc
				trait = creature_snotling
				trait = creature_goblin
			}
		}
		modifier = {
			factor = 2
			trait = creature_chaos_dwarf
		}
		modifier = {
			factor = 4
			trait = creature_skaven
		}
		modifier = {
			factor = 4
			trait = creature_halfling
		}
		modifier = {
			factor = 4
			trait = creature_skink
		}
		modifier = {
			factor = 6
			trait = creature_saurus
		}
		modifier = {
			factor = 1.8		# Knows how to take precautions
			trait = witch_hunter
		}
		modifier = {
			factor = 0.7
			OR = {
				trait = mutation_minor
				trait = mutation_major
				trait = mutation_massive
			}
		}
		modifier = {
			factor = 0.9
			trait = addict
		}
		modifier = {
			factor = 0.8
			trait = lore_tzeentch
		}
		modifier = {
			factor = 0.9
			wh_is_mage_trigger = no
			nor = {
				trait = magic_potential_3
				trait = magic_potential_4
			}
			OR = {
				trait = lunatic_1
				trait = lunatic_2
				trait = lunatic_3
			}
		}
		modifier = {
			factor = 2
			has_character_flag = forsaken_flag
		}
		# Getting mutated by by nurgle illness (this should be placed in nurgle's disease effct
		# maybe?
		# Religion dependent modifier (obviously service under darks gods banner increase chance)
		# basic modifer
		modifier = {
			factor = 0.5
			religion_group = chaos_gods_group
		}
		# modifier for more zealous guys
		modifier = {
			factor = 1.25
			religion_group = chaos_gods_group
			piety = 50
			NOT = {
				piety = 200
			}
		}
		modifier = {
			factor = 0.9
			religion_group = chaos_gods_group
			piety = 200
		}
		modifier = {
			factor = 0.8
			religion_group = chaos_gods_group
			piety = 500
		}
		# CULTISTS MUTATE FASTER
		modifier = {
			factor = 0.7
			society_member_of = cult_of_tzeentch
		}
		modifier = {
			factor = 0.8
			OR = {
				society_member_of = cult_of_khorne
				society_member_of = cult_of_slaanesh
				society_member_of = cult_of_nurgle
				society_member_of = cult_of_undivided
			}
		}
		# Location dependent modifiers
		modifier = {
			factor = 0.5
			location = {
				empire = {
					title = e_chaos_wastes
				}
			}
		}
		modifier = {
			factor = 0.5
			location = {
				kingdom = {
					title = k_sylvania
				}
			}
		}
		modifier = {
			factor = 0.5
			location = {
				kingdom = {
					title = k_mousillon
				}
			}
		}
		modifier = {
			factor = 0.5
			location = {
				duchy = {
					title = d_geisterforst
				}
			}
		}
		modifier = {
			factor = 0.35
			location = {
				has_province_modifier = warpdust_traces
			}
		}
		# Game Rule
		modifier = {
			factor = 50
			has_game_rule = {
				name = warhammer_mutations
				value = decreased
			}
		}
	}

	# trigger a random mutation
	immediate = {
		log = "work event id = mutation.1 for [Root.GetBestName]"
		# always add modifiers to decide which god would approve more of which mutation
		# always call for mutation.1001 on any added mutation to determine the new value of the two variables.
		random_list = {
			7 = {
				modifier = {
 					factor = 0
 					trait = mut_eyes

				}
				modifier = {
 					factor = 1.5
 					religion = tzeentch

				}
				character_event = {
					id = mutation.2
				}
			} # thirdeye
			8 = {
				character_event = {
					id = mutation.3
				}
			} # spines
			8 = {
				character_event = {
					id = mutation.4
				}
			} # smell
			8 = {
				character_event = {
					id = mutation.5
				}
			} # scales
			7 = {
				modifier = {
 					factor = 1.75
 					religion = khorne

				}
				character_event = {
					id = mutation.6
				}
			} # horns
			8 = {
				character_event = {
					id = mutation.7
				}
			} # spines
			6 = {
				modifier = {
 					factor = 0
 					trait = creature_beastman

				}
				modifier = {
 					factor = 0
 					trait = monstrous

				}
				modifier = {
 					factor = 1.75
 					religion = khorne

				}
				character_event = {
					id = mutation.8
				}
			} # monstrous
			8 = {
				modifier = {
 					factor = 1.75
 					religion = nurgle

				}
				character_event = {
					id = mutation.9
				}
			} # nurgles rot
			7 = {
				character_event = {
					id = mutation.10
				}
			} # second head
			8 = {
				modifier = {
 					factor = 1.75
 					religion = tzeentch

				}
				character_event = {
					id = mutation.20005
				}
			} # beak
			7 = {
				modifier = {
 					factor = 1.75
 					religion = slaanesh

				}
				character_event = {
					id = mutation.20006
				}
			} # tongue
			8 = {
				character_event = {
					id = mutation.20007
				}
			} # teeth
			4 = {
				character_event = {
					id = mutation.20008
				}
			} # many eyes
			6 = {
				modifier = {
 					factor = 0
 					trait = mut_eyes

				}
				character_event = {
					id = mutation.20009
				}
			} # big eyes
		}
	}
}

# advancing mutation variable, add trait when needed
# 5 mutation_counter - mutation_minor

# 10 mutation_counter - mutation_major
# 20 mutation_counter - mutation_massive
character_event = {
	id = mutation.1001
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.1001 for [Root.GetBestName]"
 		random_list = {
			25 = {
				modifier = {
 					factor = 0.9
 					trait = wounded

				}
				modifier = {
 					factor = 0.7
 					trait = maimed

				}
				modifier = {
 					factor = 0.25
 					trait = incapable

				}
				modifier = {
 					factor = 0.7
 					trait = weak

				}
				modifier = {
 					factor = 0.8
 					trait = fragile

				}
				modifier = {
 					factor = 0.9
 					trait = soft

				}
				modifier = {
 					factor = 1.2
 					trait = hardy

				}
				modifier = {
 					factor = 1.5
 					trait = tough

				}
				modifier = {
 					factor = 1.75
 					trait = strong

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 2
 					has_character_modifier = magic_power_4

				}

			}
			75 = {
				change_variable = {
					which = "mutation_counter"
					value = 1
				}
				if = {
					limit = {
						trait = mutation_massive
					}
					character_event = {
						id = mutation.1005
					} # directly go on lunacy check
					break = yes
				}
				if = {
					limit = {
						NOT = {
							trait = mutation_massive
						}
						check_variable = {
							which = "mutation_counter"
							value = 20
						}
					}
					remove_trait = mutation_minor
					remove_trait = mutation_major
					add_trait = mutation_massive
					character_event = {
						id = mutation.1002
					}
					break = yes
				}
				if = {
					limit = {
						NOT = {
							trait = mutation_major
						}
						check_variable = {
							which = "mutation_counter"
							value = 10
						}
					}
					remove_trait = mutation_minor
					remove_trait = mutation_massive
					add_trait = mutation_major
					character_event = {
						id = mutation.1003
					}
					break = yes
				}
				if = {
					limit = {
						NOT = {
							trait = mutation_minor
						}
						check_variable = {
							which = "mutation_counter"
							value = 5
						}
					}
					remove_trait = mutation_major
					remove_trait = mutation_massive
					add_trait = mutation_minor
					character_event = {
						id = mutation.1004
					}
					break = yes
				}
			}
		}
	}
}

# character has become a massive mutant
character_event = {
	id = mutation.1002
	desc = "EVTDESC_MUTATION_1002"
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.1002 for [Root.GetBestName]"
	}

	option = {
		name = EVTDESC_MUTATION_1002A
		add_trait = mutation_massive
		hidden_tooltip = {
			character_event = {
				id = mutation.1005
			}
		} # lunacy
	}
}

# character has become a major mutant
character_event = {
	id = mutation.1003
	desc = "EVTDESC_MUTATION_1003"
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.1003 for [Root.GetBestName]"
	}

	option = {
		name = EVTDESC_MUTATION_1003A
		add_trait = mutation_major
		hidden_tooltip = {
			character_event = {
				id = mutation.1005
			}
		} # lunacy
	}
}

# character has become a minor mutant
character_event = {
	id = mutation.1004
	desc = "EVTDESC_MUTATION_1004"
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.1004 for [Root.GetBestName]"
	}

	option = {
		name = EVTDESC_MUTATION_1004A
		add_trait = mutation_minor
		hidden_tooltip = {
			character_event = {
				id = mutation.1005
			}
		} # lunacy
	}
}

# advancing lunatic variable, add trait when needed
# 5 lunatic_counter - lunatic_1

# 10 lunatic_counter - lunatic_2
# 20 lunatic_counter - lunatic_3
character_event = {
	id = mutation.1005
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.1005 for [Root.GetBestName]"
 		random_list = {
			30 = {
				modifier = {
 					factor = 1.5
 					nor = {
						trait = creature_human
						trait = creature_amazon
					}
				}
				modifier = {
 					factor = 0.7
 					trait = infirm

				}
				modifier = {
 					factor = 0.7
 					trait = addict

				}
				modifier = {
 					factor = 0.8
 					trait = depressed

				}
				modifier = {
 					factor = 0.9
 					trait = stressed

				}
				modifier = {
 					factor = 0.9
 					trait = drunkard

				}
				modifier = {
 					factor = 0.5
 					trait = imbecile

				}
				modifier = {
 					factor = 0.6
 					trait = idiot

				}
				modifier = {
 					factor = 0.7
 					trait = slow

				}
				modifier = {
 					factor = 0.8
 					trait = dumb

				}
				modifier = {
 					factor = 0.9
 					trait = dim

				}
				modifier = {
 					factor = 1.2
 					trait = bright

				}
				modifier = {
 					factor = 1.5
 					trait = smart

				}
				modifier = {
 					factor = 1.75
 					trait = quick

				}
				modifier = {
 					factor = 2
 					trait = brilliant

				}
				modifier = {
 					factor = 2.5
 					trait = genius

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 2
 					has_character_modifier = magic_power_4

				}
				modifier = {
					factor = 0.75
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
				modifier = {
					factor = 0.75
					check_variable = {
						which = "mutation_counter"
						value = 5
					}
				}
				modifier = {
					factor = 0.75
					check_variable = {
						which = "mutation_counter"
						value = 10
					}
				}
				modifier = {
					factor = 0.75
					check_variable = {
						which = "mutation_counter"
						value = 15
					}
				}
				modifier = {
					factor = 0.75
					check_variable = {
						which = "mutation_counter"
						value = 20
					}
				}
				modifier = {
					factor = 0.75
					check_variable = {
						which = "mutation_counter"
						value = 25
					}
				}
				modifier = {
					factor = 0.75
					check_variable = {
						which = "mutation_counter"
						value = 30
					}
				}
				modifier = {
					factor = 0.75
					check_variable = {
						which = "mutation_counter"
						value = 35
					}
				}
				modifier = {
					factor = 0.75
					check_variable = {
						which = "mutation_counter"
						value = 40
					}
				}
				modifier = {
					factor = 0.5
					check_variable = {
						which = "mutation_counter"
						value = 50
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = "mutation_counter"
						value = 60
					}
				}
				modifier = {
					factor = 0.25
					check_variable = {
						which = "mutation_counter"
						value = 70
					}
				}
				modifier = {
					factor = 0.05
					check_variable = {
						which = "mutation_counter"
						value = 80
					}
				}
				modifier = {
					factor = 0.05
					check_variable = {
						which = "mutation_counter"
						value = 90
					}
				}

			}
			70 = {
				change_variable = {
					which = "lunatic_counter"
					value = 1
				}
				if = {
					limit = {
						NOT = {
							trait = lunatic_3
						}
						check_variable = {
							which = "lunatic_counter"
							value = 20
						}
					}
					remove_trait = lunatic_1
					remove_trait = lunatic_2
					add_trait = lunatic_3
					character_event = {
						id = mutation.1006 days = 50 random = 150
					}
					break = yes
				}
				if = {
					limit = {
						NOT = {
							trait = lunatic_2
						}
						check_variable = {
							which = "lunatic_counter"
							value = 10
						}
					}
					remove_trait = lunatic_1
					remove_trait = lunatic_3
					add_trait = lunatic_2
					character_event = {
						id = mutation.1007 days = 50 random = 150
					}
					break = yes
				}
				if = {
					limit = {
						NOT = {
							trait = lunatic_1
						}
						check_variable = {
							which = "lunatic_counter"
							value = 5
						}
					}
					remove_trait = lunatic_3
					remove_trait = lunatic_2
					add_trait = lunatic_1
					character_event = {
						id = mutation.1008 days = 50 random = 150
					}
					break = yes
				}
			}
		}
	}
}

# character has become a raving lunatic
character_event = {
	id = mutation.1006
	desc = "EVTDESC_MUTATION_1006"
	picture = GFX_evt_lunatic
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.1006 for [Root.GetBestName]"
	}

	option = {
		name = EVTDESC_MUTATION_1006A
		add_trait = lunatic_3
	}
}

# character has become insane
character_event = {
	id = mutation.1007
	desc = "EVTDESC_MUTATION_1007"
	picture = GFX_evt_lunatic
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.1007 for [Root.GetBestName]"
	}

	option = {
		name = EVTDESC_MUTATION_1007A
		add_trait = lunatic_2
	}
}

# character has become twitchy
character_event = {
	id = mutation.1008
	desc = "EVTDESC_MUTATION_1008"
	picture = GFX_evt_lunatic
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.1008 for [Root.GetBestName]"
	}

	option = {
		name = EVTDESC_MUTATION_1008A
		add_trait = lunatic_1
	}
}

# become forsaken (full lunatics with no or little mutations)
character_event = {
	id = mutation.1009
	religion_group = chaos_gods_group
	desc = "EVTDESC_MUTATION_1009"
	picture = GFX_evt_lunatic

	# things which exclude mutation
	trigger = {
		nor = {
			has_character_flag = forsaken_flag
			location = {
				region = world_ulthuan
			}
			trait = creature_forestspirit
			trait = creature_treekin
			trait = possessed
			check_variable = {
				which = "khorne_favor"
				value = 5
			}
			check_variable = {
				which = "nurgle_favor"
				value = 5
			}
			check_variable = {
				which = "slaanesh_favor"
				value = 5
			}
			check_variable = {
				which = "tzeentch_favor"
				value = 5
			}
			# more likely to devolve into chaos spawn
			trait = mutation_massive
		}
		trait = lunatic_3
		wh_is_mage_trigger = no
		is_undead_trigger = no
	}

	mean_time_to_happen = {
		years = 150
		# Cosmic modifers not geography or trait dependent
		# Morrslieb presence
		modifier = {
			factor = 0.75
			has_global_flag = morrslieb_full
		}
		# Chaos counter modifier
		modifier = {
			factor = 0.9
			has_global_flag = doom_low
		}
		modifier = {
			factor = 0.6
			has_global_flag = doom_medium
		}
		modifier = {
			factor = 0.5
			has_global_flag = doom_high
		}
		modifier = {
			factor = 0.4
			has_global_flag = doom_very_high
		}
		modifier = {
			factor = 0.3
			has_global_flag = doom
		}
		# Trait dependent modifiers
		modifier = {
			factor = 10
			OR = {
				trait = creature_dwarf
				trait = creature_orc
				trait = creature_snotling
				trait = creature_goblin
			}
		}
		modifier = {
			factor = 2
			trait = creature_chaos_dwarf
		}
		modifier = {
			factor = 4
			trait = creature_skaven
		}
		modifier = {
			factor = 4
			trait = creature_halfling
		}
		modifier = {
			factor = 5
			nor = {
				trait = mutation_minor
				trait = mutation_major
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				trait = mutation_minor
				trait = mutation_major

			}
		}
		modifier = {
			factor = 0.5
			NOT = {
				piety = 50
			}
		}
		# modifier for more zealous guys
		modifier = {
			factor = 1.5
			piety = 50
		}
		modifier = {
			factor = 1.5
			piety = 200
		}
		modifier = {
			factor = 1.5
			piety = 500
		}
		modifier = {
			factor = 1.5
			piety = 600
		}
		modifier = {
			factor = 1.5
			piety = 700
		}
		modifier = {
			factor = 2
			piety = 800
		}
		modifier = {
			factor = 2
			piety = 900
		}
		modifier = {
			factor = 3
			piety = 1000
		}
		modifier = {
			factor = 15		# though if you survived by this point you should be a Demon Prince by know...
			piety = 2000
		}
		modifier = {
			factor = 2
			check_variable = {
				which = "khorne_favor"
				value = 25
			}
			religion = khorne
		}
		modifier = {
			factor = 2
			check_variable = {
				which = "nurgle_favor"
				value = 25
			}
			religion = nurgle
		}
		modifier = {
			factor = 2
			check_variable = {
				which = "slaanesh_favor"
				value = 25
			}
			religion = slaanesh
		}
		modifier = {
			factor = 2
			check_variable = {
				which = "tzeentch_favor"
				value = 25
			}
			religion = tzeentch
		}
		modifier = {
			factor = 0.75
			check_variable = {
				which = "lunatic_counter"
				value = 25
			}
		}
		modifier = {
			factor = 0.75
			check_variable = {
				which = "lunatic_counter"
				value = 30
			}
		}
		modifier = {
			factor = 0.75
			check_variable = {
				which = "lunatic_counter"
				value = 35
			}
		}
		modifier = {
			factor = 0.75
			check_variable = {
				which = "lunatic_counter"
				value = 40
			}
		}
		modifier = {
			factor = 0.5
			check_variable = {
				which = "lunatic_counter"
				value = 50
			}
		}
		modifier = {
			factor = 0.25
			check_variable = {
				which = "lunatic_counter"
				value = 60
			}
		}
		modifier = {
			factor = 0.25
			check_variable = {
				which = "lunatic_counter"
				value = 70
			}
		}
		modifier = {
			factor = 0.25
			check_variable = {
				which = "lunatic_counter"
				value = 80
			}
		}
		modifier = {
			factor = 0.25
			check_variable = {
				which = "lunatic_counter"
				value = 90
			}
		}
		# Location dependent modifiers
		modifier = {
			factor = 0.75
			location = {
				empire = {
					title = e_chaos_wastes
				}
			}
		}
		modifier = {
			factor = 0.75
			location = {
				kingdom = {
					title = k_sylvania
				}
			}
		}
		modifier = {
			factor = 0.75
			location = {
				kingdom = {
					title = k_mousillon
				}
			}
		}
		modifier = {
			factor = 0.75
			location = {
				duchy = {
					title = d_geisterforst
				}
			}
		}
		modifier = {
			factor = 0.75
			location = {
				has_province_modifier = warpdust_traces
			}
		}
	}

	immediate = {
		log = "work event id = mutation.1009 for [Root.GetBestName]"
	}

	option = {
		name = EVTDESC_MUTATION_1009A
		abdicate = yes
		add_trait = disinherited
		set_character_flag = forsaken_flag
		set_character_flag = do_not_disturb
		give_nickname = nick_the_forsaken
		change_diplomacy = -15
		change_intrigue = -15
		change_stewardship = -15
		change_learning = -15
		change_martial = -5
		any_friend = {
			remove_friend = ROOT
		}
		any_lover = {
			remove_lover = ROOT
		}
		any_spouse = {
			remove_spouse = ROOT
		}
		hidden_tooltip = {
			remove_trait = champion_khorne
			remove_trait = champion_nurgle
			remove_trait = champion_slaanesh
			remove_trait = champion_tzeentch
			remove_trait = chosen_khorne
			remove_trait = chosen_nurgle
			remove_trait = chosen_slaanesh
			remove_trait = chosen_tzeentch
		}
	}
}

# become chaos spawn (mutation_massive+lunatic_3)
character_event = {
	id = mutation.1010
	desc = "EVTDESC_MUTATION_1010"
	picture = GFX_evt_chaos_spawn

	# things which exclude mutation
	trigger = {
		nor = {
			trait = creature_chaosspawn
			trait = creature_forestspirit
			trait = creature_treekin
			check_variable = {
				which = "khorne_favor"
				value = 40
			}
			check_variable = {
				which = "nurgle_favor"
				value = 40
			}
			check_variable = {
				which = "slaanesh_favor"
				value = 40
			}
			check_variable = {
				which = "tzeentch_favor"
				value = 40
			}
		}
		trait = mutation_massive
		trait = lunatic_3
		is_undead_trigger = no
	}

	mean_time_to_happen = {
		years = 100
		# Cosmic modifers not geography or trait dependent
		# Morrslieb presence
		modifier = {
			factor = 0.75
			has_global_flag = morrslieb_full
		}
		# Chaos counter modifier
		modifier = {
			factor = 0.9
			has_global_flag = doom_low
		}
		modifier = {
			factor = 0.6
			has_global_flag = doom_medium
		}
		modifier = {
			factor = 0.5
			has_global_flag = doom_high
		}
		modifier = {
			factor = 0.4
			has_global_flag = doom_very_high
		}
		modifier = {
			factor = 0.3
			has_global_flag = doom
		}
		# Trait dependent modifiers
		modifier = {
			factor = 10
			trait = creature_dwarf
		}
		modifier = {
			factor = 10
			OR = {
				trait = creature_orc
				trait = creature_snotling
				trait = creature_goblin
			}
		}
		modifier = {
			factor = 2
			trait = creature_chaos_dwarf
		}
		modifier = {
			factor = 4
			trait = creature_skaven
		}
		modifier = {
			factor = 4
			trait = creature_halfling
		}
		modifier = {
			factor = 0.5
			NOT = {
				piety = 50
			}
		}
		# modifier for more zealous guys
		modifier = {
			factor = 1.25
			piety = 50
		}
		modifier = {
			factor = 1.25
			piety = 200
		}
		modifier = {
			factor = 1.25
			piety = 500
		}
		modifier = {
			factor = 1.25
			piety = 600
		}
		modifier = {
			factor = 1.25
			piety = 700
		}
		modifier = {
			factor = 2
			piety = 800
		}
		modifier = {
			factor = 2
			piety = 900
		}
		modifier = {
			factor = 3
			piety = 1000
		}
		modifier = {
			factor = 5		# though if you survived by this point you should be a Demon Prince by know...
			piety = 2000
		}
		modifier = {
			factor = 2
			check_variable = {
				which = "khorne_favor"
				value = 25
			}
			religion = khorne
		}
		modifier = {
			factor = 2
			check_variable = {
				which = "nurgle_favor"
				value = 25
			}
			religion = nurgle
		}
		modifier = {
			factor = 2
			check_variable = {
				which = "slaanesh_favor"
				value = 25
			}
			religion = slaanesh
		}
		modifier = {
			factor = 2
			check_variable = {
				which = "tzeentch_favor"
				value = 25
			}
			religion = tzeentch
		}
		modifier = {
			factor = 0.75
			check_variable = {
				which = "mutation_counter"
				value = 25
			}
		}
		modifier = {
			factor = 0.75
			check_variable = {
				which = "mutation_counter"
				value = 30
			}
		}
		modifier = {
			factor = 0.75
			check_variable = {
				which = "mutation_counter"
				value = 35
			}
		}
		modifier = {
			factor = 0.75
			check_variable = {
				which = "mutation_counter"
				value = 40
			}
		}
		modifier = {
			factor = 0.5
			check_variable = {
				which = "mutation_counter"
				value = 50
			}
		}
		modifier = {
			factor = 0.25
			check_variable = {
				which = "mutation_counter"
				value = 60
			}
		}
		modifier = {
			factor = 0.25
			check_variable = {
				which = "mutation_counter"
				value = 70
			}
		}
		modifier = {
			factor = 0.25
			check_variable = {
				which = "mutation_counter"
				value = 80
			}
		}
		modifier = {
			factor = 0.25
			check_variable = {
				which = "mutation_counter"
				value = 90
			}
		}
		modifier = {
			factor = 0.75
			check_variable = {
				which = "lunatic_counter"
				value = 25
			}
		}
		modifier = {
			factor = 0.75
			check_variable = {
				which = "lunatic_counter"
				value = 50
			}
		}
		modifier = {
			factor = 0.75
			check_variable = {
				which = "lunatic_counter"
				value = 75
			}
		}
		# Location dependent modifiers
		modifier = {
			factor = 0.5
			location = {
				empire = {
					title = e_chaos_wastes
				}
			}
		}
		modifier = {
			factor = 0.75
			location = {
				kingdom = {
					title = k_sylvania
				}
			}
		}
		modifier = {
			factor = 0.75
			location = {
				kingdom = {
					title = k_mousillon
				}
			}
		}
		modifier = {
			factor = 0.75
			location = {
				duchy = {
					title = d_geisterforst
				}
			}
		}
		modifier = {
			factor = 0.75
			location = {
				has_province_modifier = warpdust_traces
			}
		}
	}

	immediate = {
		log = "work event id = mutation.1010 for [Root.GetBestName]"
	}

	option = {
		name = EVTDESC_MUTATION_1010A
		abdicate = yes
		add_trait = disinherited
		add_trait = creature_chaosspawn
		set_character_flag = do_not_disturb
		any_friend = {
			remove_friend = ROOT
		}
		any_rival = {
			remove_rival = ROOT
		}
		any_lover = {
			remove_lover = ROOT
		}
		any_spouse = {
			remove_spouse = ROOT
		}
		hidden_tooltip = {
			set_graphical_culture = chaosspawn
			character_event = {
				id = mutation.1011 days = 365 random = 7300
			}
		} # 20 years top before they collapse entirely
	}
}

# chaos spawn collapses entirely
character_event = {
	id = mutation.1011
	desc = "EVTDESC_MUTATION_1011"
	picture = GFX_evt_chaos_spawn
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.1011 for [Root.GetBestName]"
	}

	option = {
		name = EVTDESC_MUTATION_1011A
		if = {
			limit = {
				is_invincible_trigger = yes
			}
			antideath_effect = yes
			break = yes
		}
		death = {
			death_reason = death_sacrificed
		}
	}
}

# vassal under mutant
character_event = {
	id = mutation.1012
	hide_window = yes
	min_age = 16

	trigger = {
		independent = no
		nor = {
			trait = incapable
			has_any_opinion_modifier = opinion_mutant
			religion_group = chaos_gods_group
			religion_group = necromantic_group
			religion_group = horned_rat_god_group
		}
		liege = {
			OR = {
				trait = mutation_minor
				trait = mutation_major
				trait = mutation_massive
			}
		}
	}

	mean_time_to_happen = {
		months = 2
	}

	immediate = {
		log = "work event id = mutation.1012 for [Root.GetBestName]"
		liege = {
			ROOT = {
				opinion = {
					modifier = opinion_mutant
					who = PREV
					years = 1000
				}
			}
		}
	}
}

# vassal no longer under mutant (or turned to the chaos gods)
character_event = {
	id = mutation.1013
	hide_window = yes
	min_age = 16

	trigger = {
		independent = no
		NOT = {
			trait = incapable
		}
		has_any_opinion_modifier = opinion_mutant
		OR = {
			religion_group = chaos_gods_group
			religion_group = necromantic_group
			religion_group = horned_rat_god_group
			liege = {
				NOT = {
					trait = mutation_minor
					trait = mutation_major
					trait = mutation_massive
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 2
	}

	immediate = {
		log = "work event id = mutation.1013 for [Root.GetBestName]"
		liege = {
			ROOT = {
				remove_opinion = {
					modifier = opinion_mutant
					who = PREV
				}
			}
		}
	}
}

# lunacy recedes/increases (five-yearly, to check if the variables are alright)
character_event = {
	id = mutation.1014
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			AND = {
				trait = lunatic_3
				NOT = {
					check_variable = {
						which = "lunatic_counter"
						value = 20
					}
				}
			}
			AND = {
				trait = lunatic_2
				NOT = {
					check_variable = {
						which = "lunatic_counter"
						value = 10
					}
				}
			}
			AND = {
				trait = lunatic_1
				NOT = {
					check_variable = {
						which = "lunatic_counter"
						value = 5
					}
				}
			}
			AND = {
				check_variable = {
					which = "lunatic_counter"
					value = 20
				}
				NOT = {
					trait = lunatic_3
				}
			}
			AND = {
				check_variable = {
					which = "lunatic_counter"
					value = 10
				}
				NOT = {
					trait = lunatic_2
				}
			}
			AND = {
				check_variable = {
					which = "lunatic_counter"
					value = 5
				}
				NOT = {
					trait = lunatic_1
				}
			}
		}
		nor = {
			trait = creature_forestspirit
			trait = creature_treekin
			trait = avatar_kurnous
			has_character_flag = kurnous_frenzy
		}
	}

	immediate = {
		log = "work event id = mutation.1014 for [Root.GetBestName]"
		if = {
			limit = {
				trait = lunatic_3
				NOT = {
					check_variable = {
						which = "lunatic_counter"
						value = 20
					}
				}
			}
			remove_trait = lunatic_3
			remove_character_modifier = bloodthirsty
			remove_character_modifier = god_delusion
			if = {
				limit = {
					check_variable = {
						which = "lunatic_counter"
						value = 10
					}
				}
				add_trait = lunatic_2
			}
			if = {
				limit = {
					check_variable = {
						which = "lunatic_counter"
						value = 5
					}
					NOT = {
						check_variable = {
							which = "lunatic_counter"
							value = 10
						}
					}
				}
				add_trait = lunatic_1
			}
			break = yes
		}
		if = {
			limit = {
				trait = lunatic_2
				NOT = {
					check_variable = {
						which = "lunatic_counter"
						value = 10
					}
				}
			}
			remove_trait = lunatic_2
			remove_character_modifier = blind_virtue
			remove_character_modifier = despairing_laughter
			remove_character_modifier = unfeeling
			remove_character_modifier = fake_mage
			remove_character_modifier = bloodthirsty
			remove_character_modifier = god_delusion
			if = {
				limit = {
					check_variable = {
						which = "lunatic_counter"
						value = 5
					}
				}
				add_trait = lunatic_1
			}
			break = yes
		}
		if = {
			limit = {
				trait = lunatic_1
				NOT = {
					check_variable = {
						which = "lunatic_counter"
						value = 5
					}
				}
			}
			remove_trait = lunatic_1
			remove_character_modifier = blind_virtue
			remove_character_modifier = despairing_laughter
			remove_character_modifier = unfeeling
			remove_character_modifier = fake_mage
			remove_character_modifier = bloodthirsty
			remove_character_modifier = god_delusion
			break = yes
		}
		if = {
			limit = {
				check_variable = {
					which = "lunatic_counter"
					value = 20
				}
				NOT = {
					trait = lunatic_3
				}
			}
			remove_trait = lunatic_1
			remove_trait = lunatic_2
			add_trait = lunatic_3
			break = yes
		}
		if = {
			limit = {
				check_variable = {
					which = "lunatic_counter"
					value = 10
				}
				nor = {
					check_variable = {
						which = "lunatic_counter"
						value = 20
					}
					trait = lunatic_2
				}
			}
			remove_trait = lunatic_1
			add_trait = lunatic_2
			remove_trait = lunatic_3
			remove_character_modifier = bloodthirsty
			remove_character_modifier = god_delusion
			break = yes
		}
		if = {
			limit = {
				check_variable = {
					which = "lunatic_counter"
					value = 5
				}
				nor = {
					check_variable = {
						which = "lunatic_counter"
						value = 10
					}
					trait = lunatic_1
				}
			}
			add_trait = lunatic_1
			remove_trait = lunatic_2
			remove_trait = lunatic_3
			remove_character_modifier = blind_virtue
			remove_character_modifier = despairing_laughter
			remove_character_modifier = unfeeling
			remove_character_modifier = fake_mage
			remove_character_modifier = bloodthirsty
			remove_character_modifier = god_delusion
			break = yes
		}
	}
}

# vassal under lunatic on_yearly_pulse
character_event = {
	id = mutation.1015
	hide_window = yes
	only_playable = yes
	min_age = 16
	is_triggered_only = yes

	trigger = {
		independent = no
		nor = {
			trait = incapable
			trait = lunatic_3
			trait = lunatic_2
			trait = lunatic_1
			trait = trusting
			has_any_opinion_modifier = opinion_lunatic_w
			religion_group = necromantic_group
			religion_group = chaos_gods_group
			religion_group = horned_rat_god_group
		}
		liege = {
			OR = {
				trait = lunatic_3
				trait = lunatic_2
			}
		}
	}

	immediate = {
		log = "work event id = mutation.1015 for [Root.GetBestName]"
		liege = {
			ROOT = {
				opinion = {
					modifier = opinion_lunatic_w
					who = PREV
					years = 1000
				}
			}
		}
	}
}

# vassal no longer under lunatic (or turned to the chaos gods) on_yearly_pulse
character_event = {
	id = mutation.1016
	hide_window = yes
	only_playable = yes
	min_age = 16
	is_triggered_only = yes

	trigger = {
		independent = no
		NOT = {
			trait = incapable
		}
		has_any_opinion_modifier = opinion_lunatic_w
		OR = {
			religion_group = chaos_gods_group
			religion_group = horned_rat_god_group
			religion_group = necromantic_group
			trait = trusting
			trait = lunatic_3
			trait = lunatic_2
			trait = lunatic_1
			liege = {
				nor = {
					trait = lunatic_3
					trait = lunatic_2
				}
			}
		}
	}

	immediate = {
		log = "work event id = mutation.1016 for [Root.GetBestName]"
		liege = {
			ROOT = {
				remove_opinion = {
					modifier = opinion_lunatic_w
					who = PREV
				}
			}
		}
	}
}

# mutation recedes/increases (five-yearly, to check if the variables are alright)
character_event = {
	id = mutation.1017
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			AND = {
				trait = mutation_massive
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 20
					}
				}
			}
			AND = {
				trait = mutation_major
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 10
					}
				}
			}
			AND = {
				trait = mutation_minor
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 5
					}
				}
			}
			AND = {
				check_variable = {
					which = "mutation_counter"
					value = 20
				}
				NOT = {
					trait = mutation_massive
				}
			}
			AND = {
				check_variable = {
					which = "mutation_counter"
					value = 10
				}
				NOT = {
					trait = mutation_major
				}
			}
			AND = {
				check_variable = {
					which = "mutation_counter"
					value = 5
				}
				NOT = {
					trait = mutation_minor
				}
			}
		}
		nor = {
			trait = creature_forestspirit
			trait = creature_treekin
			trait = creature_nehekharan
		}
	}

	immediate = {
		log = "work event id = mutation.1017 for [Root.GetBestName]"
		if = {
			limit = {
				trait = mutation_massive
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 20
					}
				}
			}
			remove_trait = mutation_massive
			if = {
				limit = {
					check_variable = {
						which = "mutation_counter"
						value = 10
					}
				}
				add_trait = mutation_major
			}
			if = {
				limit = {
					check_variable = {
						which = "mutation_counter"
						value = 5
					}
					NOT = {
						check_variable = {
							which = "mutation_counter"
							value = 10
						}
					}
				}
				add_trait = mutation_minor
			}
			break = yes
		}
		if = {
			limit = {
				trait = mutation_major
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 10
					}
				}
			}
			remove_trait = mutation_major
			if = {
				limit = {
					check_variable = {
						which = "mutation_counter"
						value = 5
					}
				}
				add_trait = mutation_minor
			}
			break = yes
		}
		if = {
			limit = {
				trait = mutation_minor
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 5
					}
				}
			}
			remove_trait = mutation_minor
			break = yes
		}
		if = {
			limit = {
				check_variable = {
					which = "mutation_counter"
					value = 20
				}
				NOT = {
					trait = mutation_massive
				}
			}
			remove_trait = mutation_minor
			remove_trait = mutation_major
			add_trait = lunatic_3
			break = yes
		}
		if = {
			limit = {
				check_variable = {
					which = "mutation_counter"
					value = 10
				}
				nor = {
					check_variable = {
						which = "mutation_counter"
						value = 20
					}
					trait = mutation_major
				}
			}
			remove_trait = mutation_minor
			add_trait = mutation_major
			remove_trait = mutation_massive
			break = yes
		}
		if = {
			limit = {
				check_variable = {
					which = "mutation_counter"
					value = 5
				}
				nor = {
					check_variable = {
						which = "mutation_counter"
						value = 10
					}
					trait = mutation_minor
				}
			}
			add_trait = mutation_minor
			remove_trait = mutation_major
			remove_trait = mutation_massive
			break = yes
		}
	}
}

# # nurglite is ill
# character_event = {

# id = mutation.1018
# hide_window = yes

# min_age = 8
# max_age = 100

# trigger = {
# is_ill = yes

# NOT = { has_character_modifier = nurgles_blessing }
# NOT = { has_character_flag = nurgles_blessing_flag }

# OR = { religion = nurgle
# society_member_of = cult_of_nurgle

# society_member_of = cult_of_nurgle2
# society_member_of = cult_of_nurgle3 }

# }
# mean_time_to_happen = { months = 1 }

# immediate = {
# set_character_flag = nurgles_blessing_flag

# add_character_modifier = { name = nurgles_blessing
# hidden = yes

# duration = 36500 } # 100 years, then die.
# }

# }
# # Nurgle takes the blessing away

# character_event = {
# id = mutation.1019

# hide_window = yes
# min_age = 16

# trigger = {
# has_character_modifier = nurgles_blessing

# NOT = { religion = nurgle }
# NOT = { society_member_of = cult_of_nurgle }

# NOT = { }
# NOT = { society_member_of = cult_of_nurgle3 }

# }
# mean_time_to_happen = { months = 5 }

# immediate = {
# clr_character_flag = nurgles_blessing_flag

# remove_character_modifier = nurgles_blessing
# }

# }
# mutation eye on hand/additional eye
character_event = {
	id = mutation.2
	desc = "EVTDESC_MUTATION_2"
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.2 for [Root.GetBestName]"
	}

	option = {
		# cut it out
		name = EVTDESC_MUTATION_2B
		trigger = {
			nor = {
				trait = incapable
				trait = mut_thirdeye
				religion_group = chaos_gods_group
				religion_group = horned_rat_god_group
			}
			wealth = 25
		}
		wealth = -25
		random_list = {
			40 = {
				# wounded
				modifier = {
 					factor = 1.15
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_4

				}
				modifier = {
 					factor = 0.9
 					trait = stressed

				}
				modifier = {
 					factor = 0.8
 					trait = depressed

				}
				modifier = {
 					factor = 0.8
 					trait = wounded

				}
				modifier = {
 					factor = 0.25
 					trait = maimed

				}
				modifier = {
 					factor = 0.7
 					trait = weak

				}
				modifier = {
 					factor = 0.8
 					trait = fragile

				}
				modifier = {
 					factor = 0.9
 					trait = soft

				}
				modifier = {
 					factor = 1.2
 					trait = hardy

				}
				modifier = {
 					factor = 1.5
 					trait = tough

				}
				modifier = {
 					factor = 1.75
 					trait = strong

				}
				add_trait = wounded
			}
			35 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				add_trait = maimed
			}
			10 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				add_trait = incapable
			}
			5 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_suicide
				}
			}

		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	option = {
		name = EVTDESC_MUTATION_2A
		change_intrigue = 1
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 1
				}
			}
			add_trait = mut_thirdeye
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# strage look (come up with some generic description could be strange
# colour hair, fur, fingers growing on head etc)
character_event = {
	id = mutation.3
	desc = "EVTDESC_MUTATION_3"
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.3 for [Root.GetBestName]"
	}

	option = {
		# cut it out
		name = EVTDESC_MUTATION_2BB
		trigger = {
			nor = {
				trait = incapable
				religion_group = chaos_gods_group
				religion_group = horned_rat_god_group
			}
			wealth = 25
		}
		wealth = -25
		random_list = {
			40 = {
				# wounded
				modifier = {
 					factor = 1.15
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_4

				}
				modifier = {
 					factor = 0.9
 					trait = stressed

				}
				modifier = {
 					factor = 0.8
 					trait = depressed

				}
				modifier = {
 					factor = 0.8
 					trait = wounded

				}
				modifier = {
 					factor = 0.25
 					trait = maimed

				}
				modifier = {
 					factor = 0.7
 					trait = weak

				}
				modifier = {
 					factor = 0.8
 					trait = fragile

				}
				modifier = {
 					factor = 0.9
 					trait = soft

				}
				modifier = {
 					factor = 1.2
 					trait = hardy

				}
				modifier = {
 					factor = 1.5
 					trait = tough

				}
				modifier = {
 					factor = 1.75
 					trait = strong

				}
				add_trait = wounded
			}
			35 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				add_trait = maimed
			}
			10 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				add_trait = incapable
			}
			5 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_suicide
				}
			}

		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	option = {
		name = EVTDESC_MUTATION_2AB
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 1
				}
			}
			add_trait = mut_spines
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# strange smell
character_event = {
	id = mutation.4
	desc = "EVTDESC_MUTATION_4"
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.4 for [Root.GetBestName]"
	}

	option = {
		# cut it out
		name = EVTDESC_MUTATION_2BB
		trigger = {
			nor = {
				trait = incapable
				religion_group = chaos_gods_group
				religion_group = horned_rat_god_group
			}
			wealth = 25
		}
		wealth = -25
		random_list = {
			40 = {
				# wounded
				modifier = {
 					factor = 1.15
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_4

				}
				modifier = {
 					factor = 0.9
 					trait = stressed

				}
				modifier = {
 					factor = 0.8
 					trait = depressed

				}
				modifier = {
 					factor = 0.8
 					trait = wounded

				}
				modifier = {
 					factor = 0.25
 					trait = maimed

				}
				modifier = {
 					factor = 0.7
 					trait = weak

				}
				modifier = {
 					factor = 0.8
 					trait = fragile

				}
				modifier = {
 					factor = 0.9
 					trait = soft

				}
				modifier = {
 					factor = 1.2
 					trait = hardy

				}
				modifier = {
 					factor = 1.5
 					trait = tough

				}
				modifier = {
 					factor = 1.75
 					trait = strong

				}
				add_trait = wounded
			}
			35 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				add_trait = maimed
			}
			10 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				add_trait = incapable
			}
			5 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_suicide
				}
			}

		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	option = {
		name = EVTDESC_MUTATION_2AB
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 1
				}
			}
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# MAJOR
# claw instead of hand
character_event = {
	id = mutation.5
	desc = "EVTDESC_MUTATION_5"
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.5 for [Root.GetBestName]"
	}

	option = {
		# cut it out
		name = EVTDESC_MUTATION_2BB
		trigger = {
			nor = {
				trait = incapable
				religion_group = chaos_gods_group
				religion_group = horned_rat_god_group
			}
			wealth = 25
		}
		wealth = -25
		random_list = {
			40 = {
				# wounded
				modifier = {
 					factor = 1.15
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_4

				}
				modifier = {
 					factor = 0.9
 					trait = stressed

				}
				modifier = {
 					factor = 0.8
 					trait = depressed

				}
				modifier = {
 					factor = 0.8
 					trait = wounded

				}
				modifier = {
 					factor = 0.25
 					trait = maimed

				}
				modifier = {
 					factor = 0.7
 					trait = weak

				}
				modifier = {
 					factor = 0.8
 					trait = fragile

				}
				modifier = {
 					factor = 0.9
 					trait = soft

				}
				modifier = {
 					factor = 1.2
 					trait = hardy

				}
				modifier = {
 					factor = 1.5
 					trait = tough

				}
				modifier = {
 					factor = 1.75
 					trait = strong

				}
				add_trait = wounded
			}
			35 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				add_trait = maimed
			}
			10 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				add_trait = incapable
			}
			5 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_suicide
				}
			}

		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	option = {
		name = EVTDESC_MUTATION_2AB
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 2
				}
			}
			add_trait = mut_scales
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# starts turning into an animal
character_event = {
	id = mutation.6
	desc = "EVTDESC_MUTATION_6"
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.6 for [Root.GetBestName]"
	}

	option = {
		# cut it out
		name = EVTDESC_MUTATION_2BB
		trigger = {
			nor = {
				trait = incapable
				trait = mut_horns
				trait = horns_big
				religion_group = chaos_gods_group
				religion_group = horned_rat_god_group
			}
			wealth = 50
		}
		wealth = -50
		random_list = {
			40 = {
				# wounded
				modifier = {
 					factor = 1.15
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_4

				}
				modifier = {
 					factor = 0.9
 					trait = stressed

				}
				modifier = {
 					factor = 0.8
 					trait = depressed

				}
				modifier = {
 					factor = 0.8
 					trait = wounded

				}
				modifier = {
 					factor = 0.25
 					trait = maimed

				}
				modifier = {
 					factor = 0.7
 					trait = weak

				}
				modifier = {
 					factor = 0.8
 					trait = fragile

				}
				modifier = {
 					factor = 0.9
 					trait = soft

				}
				modifier = {
 					factor = 1.2
 					trait = hardy

				}
				modifier = {
 					factor = 1.5
 					trait = tough

				}
				modifier = {
 					factor = 1.75
 					trait = strong

				}
				add_trait = wounded
			}
			35 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				add_trait = maimed
			}
			10 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				add_trait = incapable
			}
			5 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_suicide
				}
			}

		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	option = {
		name = EVTDESC_MUTATION_2AB
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
				OR = {
					NOT = {
						trait = creature_beastman
					}
					is_female = yes
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 1
				}
			}
			add_trait = mut_horns
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		if = {
			limit = {
				is_female = no
				trait = creature_beastman
				trait = horns_none
			}
			remove_trait = horns_none
			add_trait = horns_small
			break = yes
		}
		if = {
			limit = {
				is_female = no
				trait = creature_beastman
				trait = horns_small
			}
			remove_trait = horns_small
			add_trait = horns_average
			break = yes
		}
		if = {
			limit = {
				is_female = no
				trait = creature_beastman
				trait = horns_average
			}
			remove_trait = horns_average
			add_trait = horns_big
			break = yes
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# outgrowth
character_event = {
	id = mutation.7
	desc = "EVTDESC_MUTATION_7"
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.7 for [Root.GetBestName]"
	}

	option = {
		# cut it out
		name = EVTDESC_MUTATION_2BB
		trigger = {
			nor = {
				trait = incapable
				religion_group = chaos_gods_group
				religion_group = horned_rat_god_group
			}
			wealth = 50
		}
		wealth = -50
		random_list = {
			40 = {
				# wounded
				modifier = {
 					factor = 1.15
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_4

				}
				modifier = {
 					factor = 0.9
 					trait = stressed

				}
				modifier = {
 					factor = 0.8
 					trait = depressed

				}
				modifier = {
 					factor = 0.8
 					trait = wounded

				}
				modifier = {
 					factor = 0.25
 					trait = maimed

				}
				modifier = {
 					factor = 0.7
 					trait = weak

				}
				modifier = {
 					factor = 0.8
 					trait = fragile

				}
				modifier = {
 					factor = 0.9
 					trait = soft

				}
				modifier = {
 					factor = 1.2
 					trait = hardy

				}
				modifier = {
 					factor = 1.5
 					trait = tough

				}
				modifier = {
 					factor = 1.75
 					trait = strong

				}
				add_trait = wounded
			}
			35 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				add_trait = maimed
			}
			10 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				add_trait = incapable
			}
			5 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_suicide
				}
			}

		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	option = {
		name = EVTDESC_MUTATION_2AB
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 2
				}
			}
			add_trait = mut_spines
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# MASSIVE
# beast look
character_event = {
	id = mutation.8
	desc = "EVTDESC_MUTATION_8"
	picture = GFX_evt_mutation
	is_triggered_only = yes

	trigger = {
		nor = {
			trait = creature_beastman
			trait = monstrous
		}
	}

	immediate = {
		log = "work event id = mutation.8 for [Root.GetBestName]"
	}

	option = {
		name = EVTDESC_MUTATION_2AB
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 5
				}
			}
			set_graphical_culture = beastman_ungor
			add_trait = monstrous
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# rotting body
character_event = {
	id = mutation.9
	desc = "EVTDESC_MUTATION_9"
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.9 for [Root.GetBestName]"
	}

	option = {
		# cut it out
		name = EVTDESC_MUTATION_2BB
		trigger = {
			nor = {
				trait = incapable
				trait = has_nurgles_rot
				religion_group = chaos_gods_group
				religion_group = horned_rat_god_group
			}
			wealth = 150
		}
		wealth = -150
		health = -0.1
		fertility = -0.1
		change_diplomacy = -2
		random_list = {
			40 = {
				# wounded
				modifier = {
 					factor = 1.15
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_4

				}
				modifier = {
 					factor = 0.9
 					trait = stressed

				}
				modifier = {
 					factor = 0.8
 					trait = depressed

				}
				modifier = {
 					factor = 0.8
 					trait = wounded

				}
				modifier = {
 					factor = 0.25
 					trait = maimed

				}
				modifier = {
 					factor = 0.7
 					trait = weak

				}
				modifier = {
 					factor = 0.8
 					trait = fragile

				}
				modifier = {
 					factor = 0.9
 					trait = soft

				}
				modifier = {
 					factor = 1.2
 					trait = hardy

				}
				modifier = {
 					factor = 1.5
 					trait = tough

				}
				modifier = {
 					factor = 1.75
 					trait = strong

				}
				add_trait = wounded
			}
			35 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				add_trait = maimed
			}
			10 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				add_trait = incapable
			}
			5 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_suicide
				}
			}

		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	option = {
		name = EVTDESC_MUTATION_2AB
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 1
				}
			}
			add_trait = has_nurgles_rot
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# additional head
character_event = {
	id = mutation.10
	desc = EVTDESC_MUTATION_10
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.10 for [Root.GetBestName]"
	}

	option = {
		# cut it out
		name = EVTDESC_MUTATION_2BB
		trigger = {
			nor = {
				trait = incapable
				trait = mut_doublehead
				religion_group = chaos_gods_group
				religion_group = horned_rat_god_group
			}
			wealth = 350
		}
		wealth = -350
		random_list = {
			20 = {
				# wounded
				modifier = {
 					factor = 1.15
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_4

				}
				modifier = {
 					factor = 0.9
 					trait = stressed

				}
				modifier = {
 					factor = 0.8
 					trait = depressed

				}
				modifier = {
 					factor = 0.8
 					trait = wounded

				}
				modifier = {
 					factor = 0.25
 					trait = maimed

				}
				modifier = {
 					factor = 0.7
 					trait = weak

				}
				modifier = {
 					factor = 0.8
 					trait = fragile

				}
				modifier = {
 					factor = 0.9
 					trait = soft

				}
				modifier = {
 					factor = 1.2
 					trait = hardy

				}
				modifier = {
 					factor = 1.5
 					trait = tough

				}
				modifier = {
 					factor = 1.75
 					trait = strong

				}
				add_trait = wounded
			}
			25 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				add_trait = maimed
			}
			30 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				add_trait = incapable
			}
			25 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_suicide
				}
			}

		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	option = {
		name = EVTDESC_MUTATION_2AB
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 7
				}
			}
			add_trait = mut_doublehead
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# beak
character_event = {
	id = mutation.20005
	desc = EVTDESC_MUTATION_20005
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.20005 for [Root.GetBestName]"
	}

	option = {
		# cut it out
		name = EVTDESC_MUTATION_2BB
		trigger = {
			nor = {
				trait = incapable
				trait = mut_beak
				religion_group = chaos_gods_group
				religion_group = horned_rat_god_group
			}
			wealth = 350
		}
		wealth = -350
		random_list = {
			20 = {
				# wounded
				modifier = {
 					factor = 1.15
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_4

				}
				modifier = {
 					factor = 0.9
 					trait = stressed

				}
				modifier = {
 					factor = 0.8
 					trait = depressed

				}
				modifier = {
 					factor = 0.8
 					trait = wounded

				}
				modifier = {
 					factor = 0.25
 					trait = maimed

				}
				modifier = {
 					factor = 0.7
 					trait = weak

				}
				modifier = {
 					factor = 0.8
 					trait = fragile

				}
				modifier = {
 					factor = 0.9
 					trait = soft

				}
				modifier = {
 					factor = 1.2
 					trait = hardy

				}
				modifier = {
 					factor = 1.5
 					trait = tough

				}
				modifier = {
 					factor = 1.75
 					trait = strong

				}
				add_trait = maimed
			}
			25 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				add_trait = disfigured
			}
			30 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = disfigured

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				add_trait = incapable
			}
			25 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				modifier = {
 					factor = 1.75
 					trait = disfigured

				}
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_suicide
				}
			}

		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	option = {
		name = EVTDESC_MUTATION_2AB
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 7
				}
			}
			add_trait = mut_beak
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# tongue
character_event = {
	id = mutation.20006
	desc = EVTDESC_MUTATION_20006
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.20006 for [Root.GetBestName]"
	}

	option = {
		# cut it out
		name = EVTDESC_MUTATION_2BB
		trigger = {
			nor = {
				trait = incapable
				trait = mut_tongue
				religion_group = chaos_gods_group
				religion_group = horned_rat_god_group
			}
			wealth = 150
		}
		wealth = -150
		random_list = {
			40 = {
				# wounded
				modifier = {
 					factor = 1.15
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_4

				}
				modifier = {
 					factor = 0.9
 					trait = stressed

				}
				modifier = {
 					factor = 0.8
 					trait = depressed

				}
				modifier = {
 					factor = 0.8
 					trait = wounded

				}
				modifier = {
 					factor = 0.25
 					trait = maimed

				}
				modifier = {
 					factor = 0.7
 					trait = weak

				}
				modifier = {
 					factor = 0.8
 					trait = fragile

				}
				modifier = {
 					factor = 0.9
 					trait = soft

				}
				modifier = {
 					factor = 1.2
 					trait = hardy

				}
				modifier = {
 					factor = 1.5
 					trait = tough

				}
				modifier = {
 					factor = 1.75
 					trait = strong

				}
				add_trait = maimed
			}
			45 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				add_trait = disfigured
			}
			10 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = disfigured

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				add_trait = incapable
			}
			5 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				modifier = {
 					factor = 1.75
 					trait = disfigured

				}
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_suicide
				}
			}

		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	option = {
		name = EVTDESC_MUTATION_2AB
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 7
				}
			}
			add_trait = mut_tongue
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# teeth
character_event = {
	id = mutation.20007
	desc = EVTDESC_MUTATION_20007
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.20007 for [Root.GetBestName]"
	}

	option = {
		# cut it out
		name = EVTDESC_MUTATION_2BB
		trigger = {
			nor = {
				trait = incapable
				trait = mut_teeth
				religion_group = chaos_gods_group
				religion_group = horned_rat_god_group
			}
			wealth = 150
		}
		wealth = -150
		random_list = {
			40 = {
				# wounded
				modifier = {
 					factor = 1.15
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_4

				}
				modifier = {
 					factor = 0.9
 					trait = stressed

				}
				modifier = {
 					factor = 0.8
 					trait = depressed

				}
				modifier = {
 					factor = 0.8
 					trait = wounded

				}
				modifier = {
 					factor = 0.25
 					trait = maimed

				}
				modifier = {
 					factor = 0.7
 					trait = weak

				}
				modifier = {
 					factor = 0.8
 					trait = fragile

				}
				modifier = {
 					factor = 0.9
 					trait = soft

				}
				modifier = {
 					factor = 1.2
 					trait = hardy

				}
				modifier = {
 					factor = 1.5
 					trait = tough

				}
				modifier = {
 					factor = 1.75
 					trait = strong

				}
				add_trait = maimed
			}
			30 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				add_trait = disfigured
			}
			10 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = disfigured

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				add_trait = incapable
			}
			10 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				modifier = {
 					factor = 1.75
 					trait = disfigured

				}
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_suicide
				}
			}

		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	option = {
		name = EVTDESC_MUTATION_2AB
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 7
				}
			}
			add_trait = mut_teeth
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# eyes
character_event = {
	id = mutation.20008
	desc = EVTDESC_MUTATION_20008
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.20008 for [Root.GetBestName]"
	}

	option = {
		# cut it out
		name = EVTDESC_MUTATION_2BB
		trigger = {
			nor = {
				trait = incapable
				trait = mut_eyes
				religion_group = chaos_gods_group
				religion_group = horned_rat_god_group
			}
			wealth = 150
		}
		wealth = -150
		random_list = {
			30 = {
				# wounded
				modifier = {
 					factor = 1.15
 					has_character_modifier = magic_power_1

				}
				modifier = {
 					factor = 1.25
 					has_character_modifier = magic_power_2

				}
				modifier = {
 					factor = 1.5
 					has_character_modifier = magic_power_3

				}
				modifier = {
 					factor = 1.75
 					has_character_modifier = magic_power_4

				}
				modifier = {
 					factor = 0.9
 					trait = stressed

				}
				modifier = {
 					factor = 0.8
 					trait = depressed

				}
				modifier = {
 					factor = 0.8
 					trait = wounded

				}
				modifier = {
 					factor = 0.25
 					trait = maimed

				}
				modifier = {
 					factor = 0.7
 					trait = weak

				}
				modifier = {
 					factor = 0.8
 					trait = fragile

				}
				modifier = {
 					factor = 0.9
 					trait = soft

				}
				modifier = {
 					factor = 1.2
 					trait = hardy

				}
				modifier = {
 					factor = 1.5
 					trait = tough

				}
				modifier = {
 					factor = 1.75
 					trait = strong

				}
				add_trait = maimed
			}
			45 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				add_trait = disfigured
			}
			20 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = disfigured

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				add_trait = incapable
			}
			5 = {
				modifier = {
 					factor = 1.5
 					trait = wounded

				}
				modifier = {
 					factor = 1.75
 					trait = maimed

				}
				modifier = {
 					factor = 1.75
 					trait = disfigured

				}
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				death = {
					death_reason = death_suicide
				}
			}

		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	option = {
		name = EVTDESC_MUTATION_2AB
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 7
				}
			}
			add_trait = mut_eyes
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# big eyes
character_event = {
	id = mutation.20009
	desc = EVTDESC_MUTATION_20009
	picture = GFX_evt_mutation
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.20009 for [Root.GetBestName]"
		remove_trait = blinded
	}

	option = {
		# cut it out
		name = EVTDESC_MUTATION_2BB
		trigger = {
			nor = {
				trait = incapable
				trait = mut_bigeyes
				religion_group = chaos_gods_group
				religion_group = horned_rat_god_group
			}
			wealth = 50
		}
		wealth = -50
		add_trait = blinded
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}

	option = {
		name = EVTDESC_MUTATION_2AB
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = "mutation_counter"
						value = 1
					}
				}
			}
			hidden_tooltip = {
				change_variable = {
					which = "mutation_counter"
					value = 7
				}
			}
			add_trait = mut_bigeyes
		}
		hidden_tooltip = {
			character_event = {
				id = mutation.1001 days = 1
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
		}
	}
}

# BR ADDITIONS - WITCH HUNTER INTERACTION
# Now the Witch Hunter goes after actual cultists, or those with high suspicion factors
character_event = {
	id = mutation.13
	min_age = 16
	title = WITCH_HUNT			# Witch Hunt
	desc = mutation13			# Mutations are a sign of chaos, and signs of chaos must be rooted out with fire and sword!You should probably check this court for signs of mutants while you 're here...
	picture = "GFX_evt_beheading"

	trigger = {
		trait = on_witch_hunt
		top_liege = {
			NOT = {
				has_character_modifier = expelled_k_witch_hunters_order
			}
		}

	}

	mean_time_to_happen = {
		months = 9

	}

	immediate = {
		log = "work event id = mutation.13 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_19A# "I will confront this individual."
		random_courtier = {
			limit = {
				NOT = {
					trait = in_hiding

				}
				OR = {
					trait = mutation_minor
					trait = mutation_major
					trait = mutation_massive

				}

			}
			character_event = {
				id = mutation.14
			}

		}

	}
}

# courtier is confronted
character_event = {
	id = mutation.14
	title = WITCH_HUNT # Witch Hunt
	desc = mutation14 # Curses! The Witch Hunter actively investigating chaos at your court has spied on you, and discovered your mutation! This is the end, for you...
	picture = "GFX_evt_beheading"
	is_triggered_only = yes

	# If not independent, appeal to your liege
	immediate = {
		log = "work event id = mutation.14 for [Root.GetBestName]"
	}

	option = {
		name = mutation14a
		trigger = {
			independent = no
		}
		liege = {
			character_event = {
				id = mutation.15
			}
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_23A # "Banish him!"
		trigger = {
			independent = yes
		}
		increase_visibility_effect = yes
		FROM = {
			banish = yes
		}
		FROM = {
			remove_trait = on_witch_hunt
		}
	}

	option = {
		name = EVTOPT_WITCHHUNTER_23B # IMPRISON_HIM
		trigger = {
			independent = yes
		}
		increase_visibility_effect = yes
		FROM = {
			imprison = yes
		}
		FROM = {
			remove_trait = on_witch_hunt
		}
	}
}

# liege is informed one of this courtiers is a suspected cultist/heretic
character_event = {
	id = mutation.15
	title = WITCH_HUNT # Witch Hunt
	desc = mutation15 # My liege! I must confess... it is true I have been horribly mutated by chaos, but I do not serve the ruinous powers, I swear it! I am an innocent victim - please do not believe the Witch Hunter's lies!
	picture = "GFX_evt_beheading"
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.15 for [Root.GetBestName]"
	}

	option = {
		name = mutation15a # Unclean abomination - death by fire for you!
		trigger = {
			OR = {
				ai = no
				trait = zealous
				trait = paranoid
				trait = arbitrary
				trait = cruel
				NOT = {
					ROOT = {
						opinion = {
							who = FROM
							value = 1
						}
					}
				}
			}
		}
		decrease_visibility_effect = yes
		FROM = {
			character_event = {
				id = witchhunter.25
			}
		}
	}

	option = {
		name = mutation15b # Very well, I shall show mercy. But see a surgeon at once!
		trigger = {
			OR = {
				ai = no
				ROOT = {
					opinion = {
						who = FROM
						value = 50
					}
				}
			}
		}
		increase_visibility_minor_effect = yes
		FROM = {
			character_event = {
				id = witchhunter.27
			}
		}
	}

	option = {
		name = mutation15c # I will not slay you, but nor will I let you roam free...
		decrease_visibility_effect = yes
		FROM = {
			character_event = {
				id = witchhunter.26
			}
		}
	}
}

# Mutants with major or massive mutations who are NOT in hiding are quickly exposed if they are from the good old world religion groups
character_event = {
	id = mutation.16
	religion_group = old_world_group
	title = Mutation
	desc = mutation16 # You come out of hiding, but your mutations are so advanced that the first courtier who sees you screams and flees in horror shouting for the guards. Soon you are surrounded, but despite your pleas for mercy, one of them stabs you, and the others quickly follow through!
	picture = "GFX_evt_mutation"
	is_triggered_only = yes

	trigger = {
		OR = {
			trait = mutation_major
			trait = mutation_massive
		}
		NOT = {
			trait = in_hiding
		}
	}

	immediate = {
		log = "work event id = mutation.16 for [Root.GetBestName]"
	}

	option = {
		name = mutation16a
		if = {
			limit = {
				is_invincible_trigger = yes
			}
			antideath_effect = yes
			break = yes
		}
		death = {
			death_reason = death_execution
		}
		if = {
			limit = {
				higher_tier_than = BARON
			}
			any_realm_lord = {
				limit = {
					ai = no
					NOT = {
						has_character_flag = mutation17
					}
				}
				character_event = {
					id = mutation.17
				}
			}
		}
	}
}

# PC rulers are informed if a fellow realm lord has been killed as a mutant
character_event = {
	id = mutation.17
	title = Mutation
	desc = mutation17 # A fellow realm ruler has been killed by his own guards, after he came out of his quarters horribly mutated. It is the topic of gossip all over the realm these days. These are terrible times...
	picture = "GFX_evt_mutation"
	is_triggered_only = yes

	immediate = {
		log = "work event id = mutation.17 for [Root.GetBestName]"
	}

	option = {
		name = EVTOPT_WITCHHUNTER_29B # "Do not bother me with such news again."
		set_character_flag = mutation17
	}

	option = {
		name = OK
	}
}
